<div class="task-header">
  <h3>Task List</h3>
  <button mat-raised-button color="primary" (click)="openAddTaskDialog()">
    –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É
  </button>
</div>

<!-- üî• –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á -->
<div class="filters-container">
  <mat-form-field appearance="outline">
    <input matInput [(ngModel)]="filterTitle" placeholder="–§–∏–ª—å—Ç—Ä –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é" />
  </mat-form-field>

  <mat-form-field appearance="outline">
    <input matInput type="date" [(ngModel)]="filterDueDate" placeholder="–§–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–µ" />
  </mat-form-field>

  <mat-form-field appearance="outline">
    <mat-select [(ngModel)]="filterStatus" placeholder="–§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É">
      <mat-option value="">–í—Å–µ</mat-option>
      <mat-option value="pending">–ù–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ</mat-option>
      <mat-option value="completed">–í—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ</mat-option>
    </mat-select>
  </mat-form-field>

  <button mat-raised-button color="accent" (click)="applyFilters()">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
  <button mat-button (click)="clearFilters()">–°–±—Ä–æ—Å–∏—Ç—å</button>
</div>

<!-- üî• –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á -->
<div class="task-grid">
  <mat-card class="task-card" *ngFor="let task of tasks">
    <ng-container *ngIf="editingTaskId === task.id; else viewMode">
      <mat-form-field appearance="outline">
        <input matInput [(ngModel)]="task.title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ" />
      </mat-form-field>

      <mat-form-field appearance="outline">
        <input matInput [(ngModel)]="task.description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" />
      </mat-form-field>

      <mat-form-field appearance="outline">
        <input matInput type="date" [(ngModel)]="task.dueDate" placeholder="–î–∞—Ç–∞" />
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-select [(ngModel)]="task.status" placeholder="–°—Ç–∞—Ç—É—Å">
          <mat-option value="pending">–ù–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ</mat-option>
          <mat-option value="completed">–í—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–µ</mat-option>
        </mat-select>
      </mat-form-field>

      <div class="task-actions">
        <button mat-raised-button color="primary" (click)="onUpdate(task)">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        <button mat-button (click)="cancelEdit()">–û—Ç–º–µ–Ω–∞</button>
      </div>
    </ng-container>

    <ng-template #viewMode>
      <h3>{{ task.title }}</h3>
      <p>{{ task.description }}</p>
      <p><strong>–î–∞—Ç–∞:</strong> {{ task.dueDate | date }}</p>
      <p><strong>–°—Ç–∞—Ç—É—Å:</strong> {{ task.status === 'completed' ? '‚úÖ' : '‚ùå' }}</p>

      <div class="task-actions">
        <button mat-button color="primary" (click)="openAddTaskDialog(task)">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
        <button mat-button color="warn" (click)="onDelete(task.id)">–£–¥–∞–ª–∏—Ç—å</button>
      </div>
    </ng-template>
  </mat-card>
</div>
